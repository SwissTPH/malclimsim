<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>How to import a model for use with malclimsim • malclimsim</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="How to import a model for use with malclimsim">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">malclimsim</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/using-malclimsim.html">Using malclimsim to infer parameters of a climate-driven dynamical transmission model</a></li>
    <li><a class="dropdown-item" href="../articles/using-your-own-model.html">How to import a model for use with malclimsim</a></li>
    <li><a class="dropdown-item" href="../articles/viewing-and-modifying-priors.html">Viewing and modifying priors</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/nputney4/malclimsim/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>How to import a model for use with malclimsim</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/nputney4/malclimsim/blob/master/vignettes/using-your-own-model.Rmd" class="external-link"><code>vignettes/using-your-own-model.Rmd</code></a></small>
      <div class="d-none name"><code>using-your-own-model.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The models used in the malclimsim package are written in the Odin
domain-specific language (DSL), as described in FitzJohn <em>et al</em>
in the paper “Reproducible parallel inference and simulation of
stochastic state space models using odin, dust, and mcstate”, published
in 2021.</p>
</div>
<div class="section level2">
<h2 id="models-are-not-written-in-r-code">Models are not written in R code<a class="anchor" aria-label="anchor" href="#models-are-not-written-in-r-code"></a>
</h2>
<p>While the syntax of the Odin DSL often resembles R code, and the
model is stored in an R file, it is not R code. One key difference is
that a model written in the Odin DSL necessarily describes a directed
acyclical graph (DAG) for which an ordering is assumed between
variables. More practically, this means that lines of code can be
written in any order and Odin “knows” how to assemble these lines into a
valid DAG. Also, compared to R, there is a much more limited set of
available functions. More information can be found here - <a href="https://mrc-ide.github.io/odin/articles/functions.html" class="external-link uri">https://mrc-ide.github.io/odin/articles/functions.html</a>.</p>
</div>
<div class="section level2">
<h2 id="some-models-are-already-available">Some models are already available<a class="anchor" aria-label="anchor" href="#some-models-are-already-available"></a>
</h2>
<p>There are some dynamical models of malaria transmission already
available upon installation of package. These models will be described
in detail elsewhere. Models that are already installed can be viewed
using base R commands.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/find.package.html" class="external-link">find.package</a></span><span class="op">(</span><span class="st">"malclimsim"</span><span class="op">)</span>, <span class="st">"/models/"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="va">model_path</span><span class="op">)</span></span></code></pre></div>
<p>Furthermore, the code underlying the models can be viewed and edited
in the following way:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/utils/file.edit.html" class="external-link">file.edit</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">model_path</span>, <span class="st">"model_new_R_with_FOI.R"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="it-is-straightforward-to-import-your-own-models">It is straightforward to import your own models<a class="anchor" aria-label="anchor" href="#it-is-straightforward-to-import-your-own-models"></a>
</h2>
<p>First the malclimsim package must be loaded.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/nputney4/malclimsim" class="external-link">malclimsim</a></span><span class="op">)</span></span></code></pre></div>
<p>Then, two objects must be defined, one for the path to the Odin model
stored in a .R file, and another for the name of the model.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Replace this line with location to model that you want to import</span></span>
<span><span class="va">model_path</span> <span class="op">&lt;-</span> <span class="st">"C:/Users/putnni/Documents/models-stored-locally/test_model.R"</span></span>
<span></span>
<span><span class="co"># This will be the name of the model that will be called when using "load_model"</span></span>
<span><span class="va">model_name</span> <span class="op">&lt;-</span> <span class="st">"new_model"</span></span></code></pre></div>
<p>Afterwards, simply call `import_model’ using these two objects as
arguments. Then, the model can be loaded by assigning the output of
load_model(model_name) to a variable.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/import_model.html">import_model</a></span><span class="op">(</span><span class="va">model_path</span>, <span class="va">model_name</span><span class="op">)</span></span>
<span></span>
<span><span class="va">new_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_model.html">load_model</a></span><span class="op">(</span><span class="va">model_name</span><span class="op">)</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Nicholas Putney.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
